<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课程详情</title>
    <link rel="stylesheet" href="./字体图标/iconfont.css">
    <link rel="stylesheet" href="css/commen.css" type="text/css" />
    <link rel="stylesheet" href="css/classDetail.css" type="text/css" />
    <script src="js/JQuery.js"></script>
    <script src="./js/commen.js"></script>

</head>

<body>
<script src = "./js/getUser.js"></script>
    <!-- 快捷导航 -->
<!--    <section class="shortcut">-->
<!--        <div class="w">-->
<!--            <div class="fl">-->
<!--                <ul>-->
<!--                    <li>师到欢迎你</li>-->
<!--                    <li><a href="#">请登录</a></li>-->
<!--                    <li><a class="hot-word" href="#">注册</a></li>-->
<!--                </ul>-->
<!--            </div>-->
<!--            <div class="fr">-->
<!--                <div class="userInfo">-->
<!--                    <div class="downT">-->
<!--                        <a href="#">用户名</a>-->
<!--                    </div>-->

<!--                    <div class="downMenu">-->
<!--                        <ul>-->
<!--                            <li><a href="#">我的课程</a></li>-->
<!--                            <li><a href="#">我的订单</a></li>-->
<!--                            <li><a href="#">我的求助</a></li>-->
<!--                            <li><a href="#">注销</a></li>-->
<!--                        </ul>-->
<!--                    </div>-->

<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </section>-->

    <!-- header--search -->
    <header class="header ">
        <!-- logo -->
        <div class="logo">
            <h1><a href="index.html" title="师到">师到</a></h1>
        </div>
        <!-- search -->
        <div class="search">

            <input type="search" name="" id="">
            <button>搜索</button>
        </div>
    </header>

    <div class="main">

        <!-- 课程概要 -->
        <div class="m_top">
            <div class="class_pic fl">

            </div>
            <div class="class_info fl">

                <h1>title</h1>
                <div class="contant">
                    <table>
                        <tr>
                            <td>教师：</td>
                            <td class="teacher_id"> </td>
                            <td>领域:</td>
                            <td class="domin"></td>
                        </tr>
                        <tr>
                            <td>参考时长：</td>
                            <td class="time"> </td>

                        </tr>
                        <tr>
                            <td>参考价格：</td>
                            <td class="time"> </td>

                        </tr>


                    </table>

                </div>

                <button>
                    <span>立刻联系</span>
                    </button>
            </div>
        </div>

        <!-- 课程详情 -->

        <div class="down">
            <div class="tab">
                <div class="tab_list">
                    <ul>
                        <li class="current"><a href="#">详情介绍</a></li>
                        <li><a href="#">评价</a></li>
                    </ul>
                </div>
                <div class="tab_contant">
                    <div class="item" id="detail" style="display: block;">
                        <!-- 课程详细介绍 -->


                    </div>

                    <div class="item">
                        <ul class="comment_list">
                            <li class="comment_item">
                                <div class="pic fl">

                                </div>
                                <div class="contant fl">
                                    <div class="user_name">
                                        user_name
                                    </div>
                                    <div class="text">
                                        text
                                    </div>
                                    <div class="date">
                                        date
                                    </div>
                                </div>
                            </li>
                        </ul>


                    </div>
                </div>
            </div>

        </div>
    </div>


</body>
<script src="./js/search.js"></script>

<script>
    // 头部的用户选项控制
    $(function() {
        $(".userInfo ").mouseover(function() {
            $(".downMenu").show();
        })
        $(".userInfo ").mouseout(function() {
            $(".downMenu").hide();
        })
    })
</script>

<!-- tab -->
<script>
    $(function() {
        $(".tab_list li").click(function() {
            $(this).addClass("current").siblings().removeClass("current");
            var index = $(this).index();
            $(".tab_contant .item").eq(index).show().siblings().hide();
        });
    })
</script>

<!-- 动态生成课程信息和评价 -->
<script>
    function CreateContant(iconfont_use, title, contant) {
        let html = ' <div class="contant_item">';
        html += '<span class="iconfont ' + iconfont_use + ' "></span><span class="text">' + title + '</span>'
        html += '<div class="contant">';
        html += contant;
        html += '</div>';
        html += '</div>';
        return html;
    }

    let localRequest = GetLocalRequest();
    let _ClassID = parseInt(localRequest.id);
    console.log(typeof(_ClassID));


    $.ajax({
        url: "http://localhost:8080/Tmall_SSM_war_exploded/showClassInfo.do",
        type: "post",
        data: {
            "classInfo_id": _ClassID
        },
        //contentType: 'application/json;charset = utf -8',
        success: function(data) {
            //生成简介栏
            console.log(data);
            $(".m_top .class_pic").css("background", "url()");
            $(".m_top .class_info h1")[0].innerHTML(data.classInfo.title);
            $(".m_top .teacher_id")[0].innerHTML(data.userInfo.username);
            $(".m_top .domin")[0].innerHTML(data.categroy.domin);
            $(".m_top .contant .time")[0].innerHTML(data.classInfo.time);

            //生成详细信息  
            var html1 = "";
            var detail = {
                class_contant: '',
                font_knowdge: '',
                add: '',
                tools: ''
            }

            detail.class_contant = data.classInfo.class_contant;
            detail.font_knowdge = data.classInfo.font_knowdge;
            detail.add = data.classInfo.add;
            detail.add = data.classInfo.tools;
            if (detail.class_contant !== '') {
                html1 += CreateContant('icon-heiban', "教学内容", detail.class_contant)
            }
            if (detail.font_knowdge !== '') {
                html1 += CreateContant('icon-shuben', "前置知识", detail.font_knowdge)
            }
            if (detail.tools !== '') {
                html1 += CreateContant('icon-jiaoju', "教学工具", detail.tools)
            }
            if (detail.add !== '') {
                html1 += CreateContant('icon-bianqian', "附加", detail.add)
            }
            var detail_contant = $("#detail");
            detail_contant.append(html1);
            console.log('ok');

            //生成评论

            var commentUsers = data.commentUsers;
            var commentList = data.comments;
            var html2 = "";
            $.each(commentList, function(k, v) {
                html2 += ' <li class="comment_item">' +
                    '<div class="pic fl">' +
                    '</div>' +
                    ' <div class="contant fl">' +
                    ' <div class="user_name">' + commentUsers[k] +
                    '</div>' +
                    '<div class = "text">' + commentList.contant +
                    '</div>' +
                    '<div class = "date' > +commentList.createDate +
                    '</div>' + '</div>' + '</li>'

            })
            $(".comment_list").append(html2);
        }
    })
</script>



</html>